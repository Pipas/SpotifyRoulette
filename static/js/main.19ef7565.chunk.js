(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(t,e,n){},,,,,function(t,e,n){t.exports=n.p+"static/media/search.97161617.svg"},function(t,e,n){t.exports=n.p+"static/media/roulette.dc8d006c.svg"},function(t,e,n){t.exports=n(21)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a,c=n(0),o=n.n(c),r=n(6),i=n.n(r),s=(n(17),n(1)),u=n(7),l=n(8),f=n(9),m=n.n(f),d=function(){function t(){Object(u.a)(this,t),this.client=void 0,this.auth=!1,this.client=new m.a}return Object(l.a)(t,[{key:"authenticateUser",value:function(){var t=window.location.hash.substring(1).split("&")[0].split("=")[1];window.location.hash="";t?(this.client.setAccessToken(t),this.auth=!0):window.location.href="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("41e10dc3f3594667b190b3681fdee8ca","&redirect_uri=").concat("https://spotifyroulette.paulocorreia.me","&scope=").concat(["user-top-read"].join("%20"),"&response_type=token&show_dialog=true")}},{key:"searchTrack",value:function(t){return this.client.searchTracks(t)}},{key:"isAuthenticated",value:function(){return this.auth}}]),t}(),h=(n(18),n(19),n(10)),p=n.n(h),b=(n(20),function(t){return o.a.createElement("div",{className:"result"},o.a.createElement("img",{className:"cover",src:t.cover,alt:"".concat(t.title," Album Cover")}),o.a.createElement("div",{className:"info"},o.a.createElement("h2",{className:"title"},t.title),o.a.createElement("p",{className:"artist"},t.artist)))}),v=function(t){var e=Object(c.useRef)(null),n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],i=a[1],u=Object(c.useState)(""),l=Object(s.a)(u,2),f=l[0],m=l[1],d=Object(c.useState)([]),h=Object(s.a)(d,2),v=h[0],E=h[1];Object(c.useEffect)(function(){e.current&&(e.current.addEventListener("focus",function(){return O(!0)}),e.current.addEventListener("focusout",function(){return O(!1)}))});var O=function(t){t&&0===f.length?i("focused"):t||f.length>0?i("focused"):(E([]),i(""))},j=v.map(function(t,e){return o.a.createElement(b,Object.assign({key:e},t))});return o.a.createElement("div",{className:"input ".concat(r),style:{height:"".concat(88+64*v.length+(v.length?8:0),"px")}},o.a.createElement("div",{className:"searchBar"},o.a.createElement("input",{type:"text",ref:e,value:f,onChange:function(t){m(t.target.value)},placeholder:"Search"}),o.a.createElement("button",{onClick:function(){null!==f&&""!==f&&t.spotify.searchTrack(f).then(function(t){t.tracks.items.length>0&&E(t.tracks.items.slice(0,3).map(function(t){return{title:t.name,artist:t.artists[0].name,cover:t.album.images[0].url}}))})}},o.a.createElement("img",{src:p.a,alt:""}))),!!v.length&&o.a.createElement("div",{className:"results"},j))},E=n(2),O=(n(5),n(11)),j=n.n(O),g=function(t){return function(t){var e=Object(c.useRef)(new E.Howl({src:"/audio/load.mp3"}));Object(c.useEffect)(function(){t&&e.current.play()},[t])}(t.loading),function(t,e){var n=Object(c.useRef)(new E.Howl({src:5===e?"/audio/shot.mp3":"/audio/blank.mp3"}));Object(c.useEffect)(function(){t&&n.current.play()},[t])}(t.shot,t.position),o.a.createElement("div",{className:"container",style:{transform:"rotate(".concat(-60*t.position,"deg)")}},o.a.createElement("div",{className:"cover ".concat(t.load&&"load")},o.a.createElement("img",{className:t.shot?"shot":"",src:t.src,alt:""})))};!function(t){t.EMPTY="empty",t.HALF="half",t.FULL="full"}(a||(a={}));var w,k=function(t){var e=Object(c.useState)(-1),n=Object(s.a)(e,2),r=n[0],i=n[1],u=Object(c.useState)(0),l=Object(s.a)(u,2),f=l[0],m=l[1],d=Object(c.useState)(a.EMPTY),h=Object(s.a)(d,2),p=h[0],b=h[1],v=function(t){var e=Object(c.useState)(-1),n=Object(s.a)(e,2),a=n[0],o=n[1];Object(c.useEffect)(function(){setTimeout(function(){t?(a>=0&&a<4&&r(),5===a&&r()):a>=0&&a<6&&r()},1500)},[a,t]);var r=function(){return o(function(t){return t+1})};return[a,r,function(){return o(-1)}]}(t.chooseBullet),O=Object(s.a)(v,3),k=O[0],N=O[1],S=O[2];!function(t){var e=Object(c.useRef)(new E.Howl({src:"/audio/spin.mp3"}));Object(c.useEffect)(function(){t&&e.current.play()},[t])}(t.state===w.SPINING);var y=[t.blank,t.blank,t.blank,t.blank,t.blank,t.bullet].map(function(e,n){return o.a.createElement(g,{key:n,src:e,position:n,shot:n===r&&t.state===w.SHOT,load:n<=k,loading:n===k&&t.state===w.LOADING})}),L=function(e,n){N(),setTimeout(function(){e()},n),t.setState(w.LOADING)},I=function(){i(-1),m(0),S(),b(a.EMPTY)},T=function(t){document.documentElement.style.setProperty("--previous","".concat(t))};Object(c.useEffect)(function(){if(t.state===w.LOAD)t.chooseBullet?p===a.EMPTY?L(function(){b(a.HALF),m(5),t.setState(w.IDLE)},7500):p===a.HALF?L(function(){t.setState(w.SPIN),b(a.FULL),T(5)},500):I():(I(),L(function(){m(5),t.setState(w.SPIN),b(a.FULL),T(5)},8300));else if(t.state===w.SPIN&&p===a.FULL){var e=P();setTimeout(function(){m(e),T(e),t.setState(w.SHOT)},1700),t.setState(w.SPINING)}});var P=function(){var t=Math.floor(6*Math.random());return document.documentElement.style.setProperty("--next","".concat(t)),i(t),t};return o.a.createElement("div",{className:"roulette ".concat(t.state," ").concat(p),style:{transform:"rotate(calc(60deg * ".concat(f,"))")}},y,o.a.createElement("img",{src:j.a,alt:""}))};!function(t){t.IDLE="idle",t.LOAD="load",t.LOADING="loading",t.SPIN="spin",t.SPINING="spining",t.SHOT="shot"}(w||(w={}));var N=function(){var t=Object(c.useRef)(new d),e=Object(c.useState)(w.IDLE),n=Object(s.a)(e,2),a=n[0],r=n[1];return Object(c.useEffect)(function(){},[]),o.a.createElement("div",{className:"app"},o.a.createElement(v,{spotify:t.current}),o.a.createElement("button",{onClick:function(){return r(w.LOAD)}},"Try me"),o.a.createElement("button",{onClick:function(){return r(w.SPIN)}},"Spin"),o.a.createElement(k,{blank:"https://upload.wikimedia.org/wikipedia/en/4/42/Beatles_-_Abbey_Road.jpg",bullet:"https://upload.wikimedia.org/wikipedia/en/9/9e/No_Love_Deep_Web_artwork.png",state:a,setState:r,chooseBullet:!1}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.19ef7565.chunk.js.map