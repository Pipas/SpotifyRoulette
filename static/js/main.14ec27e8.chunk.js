(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,function(e,t,a){},,,,,function(e,t,a){e.exports=a.p+"static/media/search.97161617.svg"},function(e,t,a){e.exports=a.p+"static/media/roulette.dc8d006c.svg"},function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(6),o=a.n(s),r=(a(17),a(1)),i=a(7),l=a(8),u=a(9),m=a.n(u),h=function(){function e(){Object(i.a)(this,e),this.client=void 0,this.auth=!1,this.client=new m.a}return Object(l.a)(e,[{key:"authenticateUser",value:function(){var e=window.location.hash.substring(1).split("&")[0].split("=")[1];window.location.hash="";e?(this.client.setAccessToken(e),this.auth=!0):window.location.href="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("41e10dc3f3594667b190b3681fdee8ca","&redirect_uri=").concat("https://spotifyroulette.paulocorreia.me","&scope=").concat(["user-top-read"].join("%20"),"&response_type=token&show_dialog=true")}},{key:"searchTrack",value:function(e){return this.client.searchTracks(e)}},{key:"isAuthenticated",value:function(){return this.auth}}]),e}(),f=(a(18),a(19),a(10)),d=a.n(f),p=(a(20),function(e){return c.a.createElement("div",{className:"result"},c.a.createElement("img",{className:"cover",src:e.cover,alt:"".concat(e.title," Album Cover")}),c.a.createElement("div",{className:"info"},c.a.createElement("h2",{className:"title"},e.title),c.a.createElement("p",{className:"artist"},e.artist)))}),b=function(e){var t=Object(n.useRef)(null),a=Object(n.useState)(""),s=Object(r.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(""),u=Object(r.a)(l,2),m=u[0],h=u[1],f=Object(n.useState)([]),b=Object(r.a)(f,2),v=b[0],g=b[1];Object(n.useEffect)(function(){t.current&&(t.current.addEventListener("focus",function(){return E(!0)}),t.current.addEventListener("focusout",function(){return E(!1)}))});var E=function(e){e&&0===m.length?i("focused"):e||m.length>0?i("focused"):(g([]),i(""))},k=v.map(function(e,t){return c.a.createElement(p,Object.assign({key:t},e))});return c.a.createElement("div",{className:"input ".concat(o),style:{height:"".concat(88+64*v.length+(v.length?8:0),"px")}},c.a.createElement("div",{className:"searchBar"},c.a.createElement("input",{type:"text",ref:t,value:m,onChange:function(e){h(e.target.value)},placeholder:"Search"}),c.a.createElement("button",{onClick:function(){null!==m&&""!==m&&e.spotify.searchTrack(m).then(function(e){e.tracks.items.length>0&&g(e.tracks.items.slice(0,3).map(function(e){return{title:e.name,artist:e.artists[0].name,cover:e.album.images[0].url}}))})}},c.a.createElement("img",{src:d.a,alt:""}))),!!v.length&&c.a.createElement("div",{className:"results"},k))},v=a(2),g=a.n(v),E=(a(5),a(11)),k=a.n(E),j=function(e){return c.a.createElement("div",{className:"container",style:{transform:"rotate(".concat(-60*e.position,"deg)")}},c.a.createElement("div",{className:"cover"},c.a.createElement("img",{className:e.shot?"shot":"",src:e.src,alt:""})))},w=function(e){var t=Object(n.useState)(-1),a=Object(r.a)(t,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(r.a)(i,2),u=l[0],m=l[1],h=[e.blank,e.blank,e.blank,e.blank,e.blank,e.bullet].map(function(e,t){return c.a.createElement(j,{key:t,src:e,position:t,shot:t===s})});return Object(n.useEffect)(function(){if("load"===e.state){var t=Math.floor(6*Math.random());document.documentElement.style.setProperty("--spin","".concat(t)),setTimeout(function(){e.setState("shot"),o(t),m(5===t?"shot":"blank")},9500)}},[e]),c.a.createElement("div",{className:"roulette ".concat(e.state),style:"shot"===e.state?{transform:"rotate(calc(60deg * ".concat(s,"))")}:{}},h,c.a.createElement("img",{src:k.a,alt:""}),c.a.createElement(g.a,{src:"/audio/load.mp3",playing:"load"===e.state}),c.a.createElement(g.a,{src:"/audio/blank.mp3",playing:"blank"===u&&"shot"===e.state}),c.a.createElement(g.a,{src:"/audio/shot.mp3",playing:"shot"===u&&"shot"===e.state}))},y=function(){var e=Object(n.useRef)(new h),t=Object(n.useState)("idle"),a=Object(r.a)(t,2),s=a[0],o=a[1];return Object(n.useEffect)(function(){},[]),c.a.createElement("div",{className:"app"},c.a.createElement(b,{spotify:e.current}),c.a.createElement("button",{onClick:function(){return o("load")}},"Try me"),c.a.createElement(w,{blank:"https://upload.wikimedia.org/wikipedia/en/4/42/Beatles_-_Abbey_Road.jpg",bullet:"https://s.mxmcdn.net/images-storage/albums4/8/3/0/7/2/3/41327038_350_350.jpg",state:s,setState:o}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.14ec27e8.chunk.js.map